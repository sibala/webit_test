{"version":3,"sources":["script.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"script.js","sourcesContent":["var rootUrl = window.location.protocol + \"//\" + window.location.host + \"/\";\n\n\n$(document).on('submit', '#createPackageForm', function(e) {\n    e.preventDefault();\n    $('#message').empty();\n\n    $.ajax({\n        type: 'POST',\n        url: rootUrl, \n        data: $('#createPackageForm').serialize(),\n        dataType: 'json',\n        xhrFields: {\n            withCredentials: true\n        },\n        success: function(data) {\n        \t$('#createPackageModal').modal('toggle');\n        \t$('#message').append('<div class=\"alert alert-success\">' + data.message + '</div>');\n        \t$('#bookPackageTable').empty();\n        \t$('#bookPackageTable').append(data.bookPackages);\n        }\n    });\n});\n\n\n$(document).on('click', '.showEditBookPackage', function(e) {\n    e.preventDefault();\n    $('#message').empty();\n\n    var bookPackageId = $(this).data('id');\n\n    $.ajax({\n        type: 'GET',\n        url: rootUrl + bookPackageId, \n        dataType: 'json',\n        xhrFields: {\n            withCredentials: true\n        },\n        success: function(data) {\n            $('#editPackageModal').modal('show');\n            $('#editPackageForm input[name=\"id\"]').val(data.bookPackage.id);\n            $('#editPackageForm #packageName').val(data.bookPackage.name);\n            $('#editPackageForm #fixedPackagePrice').val(data.bookPackage.fixed_price);\n\n            $('.editBookList').empty();\n            $('.editBookList').append(data.bookList);\n        }\n    });\n});\n\n\n$(document).on('submit', '#editPackageForm', function(e) {\n    e.preventDefault();\n    $('#message').empty();\n\n    $.ajax({\n        type: 'POST',\n        url: rootUrl + $('#editPackageForm input[name=\"id\"]').val(), \n        data: $('#editPackageForm').serialize(),\n        dataType: 'json',\n        xhrFields: {\n            withCredentials: true\n        },\n        success: function(data) {\n        \t$('#editPackageModal').modal('toggle');\n        \t$('#message').append('<div class=\"alert alert-success\">' + data.message + '</div>');\n        \t$('#bookPackageTable').empty();\n        \t$('#bookPackageTable').append(data.bookPackages);\n        }\n    });\n});\n\n\n$(document).on('click', '.deleteBook', function(e) {\n    e.preventDefault();\n    $('#message').empty();\n\n    var bookId = $(this).data('id');\n    var bookPackageId = $('#editPackageForm input[name=\"id\"]').val();\n\t// console.log($('#createBookForm').serialize() );\n\t// throw new Error('die');\n\n    $.ajax({\n\t\ttype: 'POST',\n\t\turl: rootUrl + 'books/' + bookId,\n\t\tdata: {\n\t\t\t_method: 'DELETE',\n\t\t\t_token: $('meta[name=\"csrf-token\"]').attr('content'),\n\t\t\tbookPackageId: bookPackageId\n\n\t\t},\n        success: function(data) {\n        \t$('.editBookList').empty();\n            $('.editBookList').append(data.bookList);\n        }\n    });\n});\n\n\n$('#createBookModal').on('show.bs.modal', function (event) {\n\tvar button = $(event.relatedTarget) // Button that triggered the modal\n\tvar bookPackageId = button.data('id') // Extract book_package_id from data-* attributes\n\n\tvar modal = $(this)\n\tmodal.find('.modal-body input[type=\"hidden\"]').val(bookPackageId)\n})\n\n\n$(document).on('submit', '#createBookForm', function(e) {\n    e.preventDefault();\n    $('#message').empty();\n\n    $.ajaxSetup({\n        headers: {\n            'X-CSRF-TOKEN': $('meta[name=\"csrf-token\"]').attr('content')\n        }\n \t});\n\n    $.ajax({\n        type: 'POST',\n        url: rootUrl + 'books', \n        data: $('#createBookForm').serialize(),\n        dataType: 'json',\n        xhrFields: {\n            withCredentials: true\n        },\n        success: function(data) {\n        \t$('#createBookModal').modal('toggle');\n        \t$('#message').append('<div class=\"alert alert-success\">' + data.message + '</div>');\n        \t$('#bookPackageTable').empty();\n\t        $('#bookPackageTable').append(data.bookPackages);\n\t        $('#createBookForm input[name=\"bookTitle\"]').val('');\n\t        $('#createBookForm input[name=\"bookPrice\"]').val('');\n        }\n    });\n});\n\n\n$(document).on('click', '.deleteBookPackage', function(e) {\n\te.preventDefault();\n    $('#message').empty();\n\n    var bookPackageId = $(this).data('id');\n\t// console.log(bookPackageId);\n\t// throw new Error('die');\n\t\t\n    swal({\n        title: \"Radera bokpaket?\",\n        text: \"Bokpaket med alla tillhörande böcker kommer att raderas?\",\n        type: \"warning\",\n        showCancelButton: true,\n        cancelButtonText: 'Avbryt',\n        confirmButtonColor: \"#55B95E\",\n        confirmButtonText: \"Ja, radera bokpaket!\",\n        closeOnConfirm: true\n    },\n    function(isConfirm){\n        if (isConfirm) {\n\t\t\t$.ajax({\n\t\t\t\ttype: 'POST',\n\t\t\t\turl: rootUrl + bookPackageId,\n\t\t\t\tdata: {\n\t\t\t\t\t_method: 'DELETE',\n\t\t\t\t\t_token: $('meta[name=\"csrf-token\"]').attr('content')\n\t\t\t\t},\n\t\t\t\tsuccess: function(data) {\n\t\t\t\t\t$('#message').append('<div class=\"alert alert-success\">' + data.message + '</div>');\n\t            \t$('#bookPackageTable').empty();\n\t            \t$('#bookPackageTable').append(data.bookPackages);\n\t\t\t\t}\n\t\t\t});\n        }\n    });\n});"],"sourceRoot":"/source/"}